"use strict";var Filter=React.createClass({displayName:"Filter",getInitialState:function(){return addCallback("updateFiltersModule",this.updateFilters),{title:this.props.title,filters:this.props.filters,displayTitle:this.props.displayTitle,updateFilterHandler:this.props.updateFilterHandler,slug:getSlug(this.props.title)}},updateFilters:function(t){t.title==this.state.title&&this.props.updateFiltersBatch(this.state.slug,t.filters)},handleCollapse:function(t){var e="module-"+t.target.getAttribute("data-target"),s="collapsed",l=jQuery("#"+e);l.hasClass(s)?(l.find(".filters-content").slideUp(),l.removeClass(s)):(l.find(".filters-content").slideDown(),l.addClass(s)),t.preventDefault()},render:function(){return React.createElement("div",{className:"sidebar-block selectable-module","data-attribute":this.state.slug,id:"module-"+this.state.slug},React.createElement("h3",{onClick:this.handleCollapse,"data-target":this.state.slug},this.state.displayTitle),React.createElement("a",{href:"#",className:"collapse-block","data-target":this.state.slug}),React.createElement(TagsBlock,{filters:this.props.filters,filter_name:this.state.title,handleUnselection:this.props.handleUnselection}),React.createElement(FiltersBlock,{filters:this.props.filters,title:this.state.title,filter_name:this.state.title,handleSelection:this.props.handleSelection}))}});
"use strict";var FilterCheckbox=React.createClass({displayName:"FilterCheckbox",getInitialState:function(){return{checked:!1}},render:function(){var e=getSlug(this.props.title+" "+(new Date).valueOf()),t="filter-item "+(0==this.props.count?"no-results":"");return React.createElement("div",{className:t,"data-count":this.props.count},React.createElement("input",{type:"checkbox",value:this.props.title,name:this.props.filter_name,id:e,onChange:this.props.handleSelection,disabled:0==this.props.count}),React.createElement("img",{src:scope.image_dir+"checkbox-normal.svg"}),React.createElement("img",{src:scope.image_dir+"checkbox-checked.svg"}),React.createElement("label",{htmlFor:e},this.props.title))}});
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FilterTypes=React.createClass({displayName:"FilterTypes",getInitialState:function(){var t,e=[];for(var a in this.props.scope.data){var r=this.props.scope.data[a],i={};for(var s in r){var n=[];for(var l in r[s])if("string"==typeof r[s][l])n.push({title:r[s][l],selected:!1,just_title:!1,count:l.split("-")[1]});else if("object"==_typeof(r[s][l])){n.push({title:l,selected:!1,just_title:!0});for(var c in r[s][l])n.push({title:r[s][l][c],selected:!1,just_title:!1,count:c.split("-")[1]})}i[s]=n}e.push({title:a,data:i})}for(var l in e)if(e[l].title==this.props.scope.currentType){t=e[l].data;break}var o=[],u=["impact objective","industry","geography","fundraising round","legal structure","certifications","investor type","mechanism","vehicle"];for(var l in u)for(var a in t){var d;switch(a){case"industries":d="industry";break;case"legal structures":d="legal structure";break;case"funding round":d="fundraising round";break;default:d=a}u[l]==d&&o.push({title:a,displayTitle:d,data:t[a]})}return addCallback("updatePagination",this.updatePagination),{data:e,currentType:this.props.scope.currentType,currentSet:o,originalScope:this.props.scope,currentFilters:[],filtersParam:[],currentPage:1,reviewedOnly:!1}},handleChangeType:function(t){var e=t.target.getAttribute("data-target"),a=document.getElementById(e),r="active-type",i=a.getAttribute("data-type"),s=document.querySelector("a."+r);s&&(s.className=s.className.split(r).join("")),a.className+=" "+r;var n;for(var l in this.state.data)if(i==this.state.data[l].title){n=this.state.data[l].data;break}var c=[],o=["impact objective","investor type","industry","geography","fundraising round","legal structure","certifications","investor type","mechanism","vehicle"];for(var l in o)for(var u in n){var d;switch(u){case"industries":d="industry";break;case"legal structures":d="legal structure";break;case"funding round":d="fundraising round";break;default:d=u}o[l]==d&&c.push({title:u,displayTitle:d,data:n[u]})}var h={};for(var p in c){var f=c[p],v=[];for(var l in c[p].data){var m=c[p].data[l];m.selected&&!m.just_title&&v.push(encodeURIComponent(m.title))}v.length>0&&(h[getSlug(f.title)]=v.join("[][]"))}this.state.originalScope.currentType=i,scopeDispatchEvent("updateNodesType",i),this.setState({data:this.state.data,currentType:i,currentSet:c,originalScope:this.state.originalScope,currentFilters:[],filtersParam:h,currentPage:1}),t.preventDefault()},updateFiltersBatch:function(t,e){for(var a in this.state.currentSet)if(getSlug(this.state.currentSet[a].title)==t)for(var r in e)for(var i in this.state.currentSet[a].data)if(this.state.currentSet[a].data[i].title==e[r]){this.state.currentSet[a].data[i].selected=!0;break}this.updateFilterHandler()},updateFilterHandler:function(){var t={},e="-- first";for(var a in this.state.currentSet){var r=this.state.currentSet[a],i=[];for(var s in this.state.currentSet[a].data){var n=this.state.currentSet[a].data[s];n.selected&&!n.just_title&&i.push(encodeURIComponent(n.title)),e=n.title}i.length>0&&(t[getSlug(r.title)]=i.join("[][]"))}for(var a in this.state.currentSet){var r=this.state.currentSet[a];for(var s in this.state.currentSet[a].data){var n=this.state.currentSet[a].data[s];for(var l in this.state.data)for(var c in this.state.data[l].data)if(c==r.title)for(var o in this.state.data[l].data[c])this.state.data[l].data[c][o].title==n.title&&(this.state.data[l].data[c][o].selected=n.selected)}}this.setState({currentSet:this.state.currentSet,currentFilters:this.state.currentFilters,filtersParam:t,currentPage:1});var u=this.state.currentSet.map(function(t){return{title:t.title,selected:t.data.filter(function(t){return t.selected}).map(function(t){return t.title})}});nmTrackFilter(u)},setFilterSelection:function(t,e,a){for(var r in this.state.currentSet)if(this.state.currentSet[r].title==t)for(var i in this.state.currentSet[r].data)this.state.currentSet[r].data[i].title==e&&(this.state.currentSet[r].data[i].selected=a)},handleUnselection:function(t){this.setFilterSelection(t.target.getAttribute("data-name"),t.target.getAttribute("data-value"),!1),this.updateFilterHandler(),t.preventDefault()},handleSelection:function(t){this.setFilterSelection(t.target.name,t.target.value,!0),this.updateFilterHandler(),t.preventDefault()},resetFilters:function(t){for(var e in this.state.currentSet)for(var a in this.state.currentSet[e].data)this.state.currentSet[e].data[a].selected&&!this.state.currentSet[e].data[a].just_title&&(this.state.currentSet[e].data[a].selected=!1);for(var e in this.state.data)for(var a in this.state.data[e].data)for(var r in this.state.data[e].data[a])this.state.data[e].data[a][r].selected=!1;this.setState({data:this.state.data,currentFilters:this.state.currentFilters,filtersParam:[],currentPage:1}),t.preventDefault()},updatePagination:function(t){if("undefined"!=typeof t.page)this.state.currentPage!=t.page&&this.setState({currentFilters:this.state.currentFilters,filtersParam:this.state.filtersParam,currentPage:t.page});else{var e=t.delta;this.state.currentPage+e>0&&this.setState({currentFilters:this.state.currentFilters,filtersParam:this.state.filtersParam,currentPage:this.state.currentPage+e})}},onReviewedOnly:function(){this.setState({reviewedOnly:jQuery("#reviewed_only").is(":checked")})},render:function(){var t=this,e=this.state.data.map(function(e){var a=e.title.toLowerCase(),r="type-icon icon-"+a,i="filter-type-"+a,s=t.state.currentType==e.title?"active-type":"";return React.createElement("li",{key:e.title},React.createElement("a",{href:"#",onClick:t.handleChangeType,id:i,"data-target":i,className:s,"data-type":e.title},React.createElement("span",{className:r,"data-target":i}),React.createElement("span",{className:"type-label","data-target":i},e.title)))}),a=this.state.currentSet.map(function(e){return e.data.length>0||"undefined"==typeof e.data.length?React.createElement(Filter,{title:e.title,filters:e.data,displayTitle:e.displayTitle,key:e.title,handleSelection:t.handleSelection,handleUnselection:t.handleUnselection,updateFiltersBatch:t.updateFiltersBatch}):""});return createNodes(this.state.currentType,this.state.filtersParam,this.state.reviewedOnly,this.state.currentPage),scopeDispatchEvent("updateTableView",{type:this.state.currentType,filtersParam:this.state.filtersParam,reviewedOnly:this.state.reviewedOnly,currentPage:this.state.currentPage}),closeNodeDetails(),React.createElement("div",null,React.createElement("div",{className:"sidebar-block title-block"},React.createElement("h3",null,"Filter by")),React.createElement("div",{className:"sidebar-block"},React.createElement("h3",null,this.props.title,":"),React.createElement("div",{className:"type-filters"},React.createElement("ul",null,e))),React.createElement("div",{className:"sidebar-block"},React.createElement("div",{className:"filter-item big-check"},React.createElement("input",{type:"checkbox",value:"reviewed",id:"reviewed_only",onChange:this.onReviewedOnly}),React.createElement("img",{src:scope.image_dir+"big_checkbox.svg"}),React.createElement("img",{src:scope.image_dir+"big_checkbox_checked.svg"}),React.createElement("label",{htmlFor:"reviewed_only"},"Show reviewed information only ",React.createElement("span",{className:"tooltip",title:"Check this box to view information which has been reviewed and confirmed by our data partner, Impact Space. While Impact Space data is crowdsourced, Impact Space is continuously working to improve the quality of their information."},"i")))),a,React.createElement("div",{className:"sidebar-block buttons-block"},React.createElement("a",{href:"#",className:"primary-btn btn-border reset-filters-btn",onClick:this.resetFilters},"Reset Filters")))}});
"use strict";var FiltersBlock=React.createClass({displayName:"FiltersBlock",getInitialState:function(){return{title:this.props.title,handleSelection:this.props.handleSelection}},showMoreFilters:function(t){var e="",l=!1,i="";for(var s in this.props.filters){var a=this.props.filters[s],r=getSlug(a.title+" popup "+(new Date).valueOf());if(a.just_title&&"all"==a.title?l=!0:a.just_title&&"all"!=a.title&&(l=!1),l)a.selected&&(i+=a.title+"[][][]");else{i.indexOf(a.title+"[][][]")!=-1&&(a.selected=!0);var c="";a.selected&&(c=" checked ");var o="filter-item "+(0==a.count?"no-results":"");e+=a.just_title?"<li><h4>"+a.title+"</h4></li>":'<li json="'+JSON.stringify(a)+'"><div class="filter-item '+o+'" data-count="'+a.count+'"><input type="checkbox" value="'+a.title+'" name="'+this.state.title+'" id="'+r+'" '+c+" "+(0==a.count?'disabled="true"':"")+'/><img src="'+scope.image_dir+'big_checkbox.svg"/><img src="'+scope.image_dir+'big_checkbox_checked.svg"/><label for="'+r+'">'+a.title+"</label></div></li>"}}var n="";"impact objective"==this.state.title?n="column-count: 2;":"legal structures"==this.state.title?n="column-count: 2;":"industries"==this.state.title?n="column-count: 2;":"geography"==this.state.title&&(n="column-count: 4;"),e='<form id="modal-filters" data-callback="'+this.state.title+'"><ul class="modal-filters" style="'+n+'">'+e+"</ul></form>",jQuery.cModal({type:"default",title:this.state.title+":",text:e,buttons:[{text:"Add",onClick:function(t){var e=jQuery("#modal-filters").serialize(),l=e.split("&"),i=[];for(var s in l){var a=l[s].split("=");i.push(decodeURIComponent(a[1]).split("+").join(" "))}return scopeDispatchEvent("updateFiltersModule",{title:jQuery("#modal-filters").attr("data-callback"),filters:i}),!0}}]}),t.preventDefault()},render:function(){var t=this,e=this.props.filters.map(function(e,l){return!e.selected&&!e.just_title&&l<8?React.createElement(FilterCheckbox,{title:e.title,filter_name:t.props.filter_name,count:e.count,key:e.title,handleSelection:t.state.handleSelection}):(e.just_title,"")}),l="";return this.props.filters.length>8&&(l=React.createElement("a",{href:"#",onClick:this.showMoreFilters},"more +")),React.createElement("div",{className:"filters-content"},React.createElement("form",null,e,l))}});
"use strict";var NodeDescription=React.createClass({displayName:"NodeDescription",getInitialState:function(){return addCallback("checkNodeInfo",this.onUpdateData),addCallback("onNodeDescriptionResponse",this.onResponse),{loading:!0}},onUpdateData:function(e){if("undefined"==typeof scope.cache[e.type+"_"+e.id]){var t=ajaxCall("get_node",{type:e.type,id:e.id});this.setState({loading:!0,type:e.type}),jQuery.ajax({url:t}).done(function(e){scopeDispatchEvent("onNodeDescriptionResponse",JSON.parse(e))}),jQuery(".node-details").css({display:"block",right:-500}).animate({right:0}).removeClass("collapsed")}else this.setState({data:scope.cache[e.type+"_"+e.id],type:e.type,loading:!1}),jQuery(".node-details").hasClass("collapsed")&&jQuery(".node-details").css({display:"block",right:-500}).animate({right:0}).removeClass("collapsed")},onResponse:function(e){scope.cache[e.type+"_"+e.id]=e,this.setState({data:e,type:e.type,loading:!1})},handleClickNode:function(e){var t=e.target.getAttribute("data-type"),a=e.target.getAttribute("data-id");showNodeDescription(t,a),hideTableView(),e.preventDefault()},render:function(){var e=this,t="node-details "+this.state.type,a="https://impactspace.com/"+("investor"==this.state.type?"financial-organization":"company")+"/"+(this.state.loading?"":this.state.data.slug),n=this.state.loading?React.createElement("h4",null,React.createElement("i",{className:"fa fa-refresh fa-spin","aria-hidden":"true"})):React.createElement("h4",null,this.state.data.name,React.createElement("a",{href:a,className:"edit-entity",target:"_blank"},"Edit")),l=this.state.loading||"undefined"==typeof this.state.data.company_logo?{}:{backgroundImage:"url("+this.state.data.company_logo+")"},c=this.state.loading||"undefined"==typeof this.state.data.company_logo?"":React.createElement("div",{className:"logo-container",style:l}),i=["id","type","impactspace_id","impactspace_updated_at","created_at","name","updated_at","slug","investors","companies","crunchbase_id","crunchbase_updated_at","company_logo","crunchbase_url","network_map_ready"],s=["0000-00-00"],r=["two-columns","headquarters","founded","founders","industry","legal structure","mission statement","website","external links","description","number of employees","investor type","phone","email","social"],o=React.createElement("div",null);if(!this.state.loading){var d,m=[],u=[],p=0,h=0,f=[],v=[],R="company"==this.state.type?this.state.data.investors:this.state.data.companies,E=new Date(0,0,0);for(var y in R){var b=R[y];for(var g in b)if(p+=Number(b[g].fund.amount),h++,f.push(b[g].fund),v.push(b[g]),"undefined"!=typeof b[g].fund.date){var N=b[g].fund.date.split("-"),k=new Date(N[0],N[1],N[2]);k.valueOf()>E.valueOf()&&(E=k,d=b[g].fund)}}for(var y in this.state.data){var _=!0,w=this.state.data[y];for(var D in i)_&=y!=i[D];for(var D in s)_&=w!=s[D];if(_){var j=y.split("_").join(" "),C=this.state.data[y].split("\\'").join("'").split("\\n").join("[[NEWLINE]]").split("\\r").join("\r"),S=!0;switch(y){case"overview":j="description";var F=C.split("[[NEWLINE]]"),C=F.map(function(e,t){return React.createElement("p",{key:t},e)});break;case"external_links":C=C.split('"').join("");var I=C.split(","),x=I.map(function(e,t){return React.createElement("li",{key:t},React.createElement("a",{href:e,target:"_blank"},e))});C=React.createElement("ul",null,x);break;case"number_of_employees":S=""!=C;break;case"website":C=C.split('"').join(""),C=React.createElement("a",{href:C,target:"_blank"},C);break;case"founded_date":j="founded",C=getFormattedDate(C,"long");break;case"phone":""!=C&&"0"!=C&&0!=C||(S=!1);var O="tel:"+C;C=React.createElement("a",{href:O,target:"_blank"},C);break;case"email":var O="mailto:"+C;C=React.createElement("a",{href:O,target:"_blank"},C);break;case"twitter":var Q=C.split("@");C="https://twitter.com/"+Q[1],u.push({network:y,url:C}),S=!1;break;case"facebook":case"linkedin":u.push({network:y,url:C}),S=!1}S&&m.push({title:j,content:C})}}if(u.length>0){var U=u.map(function(e){var t="fa fa-"+e.network+"-square";return React.createElement("a",{href:e.url,target:"_blank",key:e.network},React.createElement("i",{className:t,"aria-hidden":"true"}))});m.push({title:"social",content:U})}var A=[];for(var q in r)for(var L in m)if(r[q]==m[L].title){A.push(m[L]),m.splice(L,1);break}if(m.length>0)for(var L in m)A.push(m[L]);o=A.map(function(e){var t=getSlug(e.title),a="details-item details-"+t;return"two-columns"==e.title?(t=getSlug(e.content.column_a.title+" "+e.content.column_b.title),React.createElement("div",{className:"details-item two-columns",key:t},React.createElement("div",{className:"details-column column-a"},React.createElement("span",null,e.content.column_a.title),React.createElement("p",null,e.content.column_a.content)),React.createElement("div",{className:"details-column column-b"},React.createElement("span",null,e.content.column_b.title),React.createElement("p",null,e.content.column_b.content)))):React.createElement("div",{className:a,key:t},React.createElement("span",null,e.title,": "),React.createElement("p",null,e.content))})}var T="",W="";if(!this.state.loading){var p=0,h=0,f=[],v=[],R="company"==this.state.type?this.state.data.investors:this.state.data.companies;for(var y in R){var b=R[y];for(var g in b)b[g].id=y,p+=Number(b[g].fund.amount),h++,f.push(b[g].fund),v.push(b[g])}var z=(f.map(function(e,t){var a=getFormattedDate(e.date,"short"),n="-";return"undefined"!=typeof e.type&&(n=e.type),React.createElement("tr",{key:t},React.createElement("td",null,a),React.createElement("td",null,"$",abbrNumberFormat(e.amount)," / ",n),React.createElement("td",null,"1"))}),"Investors");"investor"==this.state.type&&(z="Companies");var J=v.map(function(t,a){var n="",l=0==Number(t.fund.amount)?" Undisclosed":abbrNumberFormat(t.fund.amount);0==a&&(n=React.createElement("thead",{className:"title"},React.createElement("tr",null,React.createElement("th",null,"Date"),React.createElement("th",null,"Round"),React.createElement("th",null,"Total Round Amount"))));var c="Undisclosed";return"undefined"!=typeof t.fund.type&&(c=t.fund.type),React.createElement("table",{className:"table-details",key:a},n,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,React.createElement("a",{href:"#",onClick:e.handleClickNode,"data-id":t.id,"data-type":"investor"==e.state.type?"company":"investor"},t.name)))),React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,getFormattedDate(t.fund.date)),React.createElement("td",null,c),React.createElement("td",null,l))))});W=React.createElement("li",null,React.createElement("a",{href:"#funding-details","data-toggle":"tab"},"Funding Details")),T=React.createElement("div",{className:"tab-pane",id:"funding-details"},React.createElement("div",{className:"details-item table"},React.createElement("h3",{className:"notification"},React.createElement("i",null,z),React.createElement("span",null,h)),J))}var V=this.state.loading?"":React.createElement("div",{className:"details-body"},React.createElement("div",{id:"details-body"},React.createElement("ul",{className:"nav nav-pills"},React.createElement("li",{className:"active"},React.createElement("a",{href:"#overview","data-toggle":"tab"},"Overview")),W),React.createElement("div",{className:"tab-content clearfix"},React.createElement("div",{className:"tab-pane active",id:"overview"},o),T)));return React.createElement("div",{className:t},React.createElement("a",{href:"#",className:"close-module"},React.createElement("i",{className:"fa fa-times","aria-hidden":"true"})),React.createElement("div",{className:"details-header"},c,n),V)}});
"use strict";var Pagination=React.createClass({displayName:"Pagination",getInitialState:function(){addCallback("updatePagination",this.onUpdateData);var t={};return"undefined"!=typeof this.props.pagination&&(this.props.pagination.total_pages=Math.ceil(this.props.pagination.total/this.props.pagination.per_page),t=this.props.pagination),t},onUpdateTimestamp:function(t){this.setState({timestamp:t})},onUpdateData:function(t){"undefined"!=typeof t.total&&(t.total_pages=Math.ceil(t.total/t.per_page),this.setState(t))},updatePagination:function(t){scopeDispatchEvent("updatePagination",{delta:1}),t.preventDefault()},specificPage:function(t){scopeDispatchEvent("updatePagination",{page:t})},firstPage:function(t){this.specificPage(1),t.preventDefault()},prevPage:function(t){scopeDispatchEvent("updatePagination",{delta:-1}),t.preventDefault()},nextPage:function(t){scopeDispatchEvent("updatePagination",{delta:1}),t.preventDefault()},lastPage:function(t){this.specificPage(this.state.total_pages),t.preventDefault()},jumpToPage:function(t){this.specificPage(Number(t.target.getAttribute("data-page"))),t.preventDefault()},render:function(){var t=this;if("undefined"!=typeof this.state.total){for(var e=(thousandNotation(this.state.total),2),a=[],n=[],i=this.state.total_pages-this.state.current_page,s=i>e?e:i,r=this.state.current_page-1;r>this.state.current_page-2*e;r--)(n.length<e||s+n.length<2*e)&&r>0&&(n=[r].concat(n));for(var c=[],r=this.state.current_page+1;r<=this.state.current_page+2*e;r++)(c.length<e||c.length+n.length<2*e)&&r<=this.state.total_pages&&c.push(r);a=n.concat([this.state.current_page]),a=a.concat(c);var p=(a.map(function(e){return e==t.state.current_page?React.createElement("i",{key:e},thousandNotation(e)):React.createElement("a",{key:e,href:"#","data-page":e,onClick:t.jumpToPage},thousandNotation(e))}),""),o="",l="",u="";this.state.current_page!=this.state.total_pages&&(p=React.createElement("a",{href:"#",onClick:this.nextPage},React.createElement("i",{className:"fa fa-caret-right","aria-hidden":"true"})),o=React.createElement("a",{href:"#",onClick:this.lastPage},React.createElement("i",{className:"fa fa-forward","aria-hidden":"true"}))),1!=this.state.current_page&&(l=React.createElement("a",{href:"#",onClick:this.prevPage},React.createElement("i",{className:"fa fa-caret-left","aria-hidden":"true"})),u=React.createElement("a",{href:"#",onClick:this.firstPage},React.createElement("i",{className:"fa fa-backward","aria-hidden":"true"})));return React.createElement("div",{className:"results-wrapper"},React.createElement("span",null,"Displaying results ",thousandNotation(this.state.to)))}return React.createElement("div",null)}});
"use strict";var ResultsCaption=React.createClass({displayName:"ResultsCaption",getInitialState:function(){return addCallback("updateResults",this.onUpdateData),"undefined"!=typeof this.props.scope.results?this.props.scope.results:{}},onUpdateData:function(t){this.setState(t)},render:function(){return"undefined"!=typeof this.state.investors_count?0==this.state.investors_count?React.createElement("span",null,"Results: This data shows ",this.state.companies_count," companies."):React.createElement("span",null,"Results: This data shows ",thousandNotation(this.state.investors_count)," investors and ",thousandNotation(this.state.companies_count)," companies."):React.createElement("span",null,React.createElement("i",{className:"fa fa-refresh fa-spin","aria-hidden":"true"}))}});
"use strict";var SearchModule=React.createClass({displayName:"SearchModule",getInitialState:function(){return addCallback("resetSearch",this.resetSearch),addCallback("updateNodesType",this.updateNodesType),{keywords:"",timestamp:(new Date).getTime(),placeholder:"Search Companies"}},resetSearch:function(){jQuery("#search-keywords").val(""),this.setState({keywords:""}),nmTrackEvent("Explore","Reset Search")},updateNodesType:function(e){var t="Search ";"company"==e?t+="Companies":"investor"==e&&(t+="Investors"),this.setState({placeholder:t})},searchKeyword:function(e){var t=e.target.value.toLowerCase();clearInterval(this.state.timestamp);var a=scopeDispatchEvent("search",t,!0),s=[];for(var r in a)s.push(a[r].name);var c={keywords:t,results:s.length};nmTrackSearch(c),this.setState({results:a,keywords:t})},checkNodeInfo:function(e){var t=e.target.getAttribute("data-type"),a=e.target.getAttribute("data-id");jQuery(".results-list").hide(),jQuery(".table-view").hide(),jQuery(".graph-area .graph-header .header-controls").show(),showAllNodes(),showNodeDescription(t,a),e.preventDefault()},showPreviousSearch:function(e){showAllNodes(),jQuery(".results-list").show()},graphShowResults:function(){var e=[];for(var t in this.state.results)e.push(this.state.results[t].type+"_"+this.state.results[t].id);showNodes(e)},render:function(){var e=this,t="";if(""!=this.state.keywords){this.graphShowResults();var a=this.state.results.map(function(t,a){var s=t.name.toLowerCase(),r=s.indexOf(e.state.keywords),c=t.type,o=t.id,n=React.createElement("span",{"data-type":c,"data-id":o},t.name);if(r!=-1){var i=t.name.substring(0,r),l=t.name.substring(r,r+e.state.keywords.length),d=t.name.substring(r+e.state.keywords.length,s.length);n=React.createElement("span",{"data-type":c,"data-id":o},React.createElement("span",{"data-type":c,"data-id":o},i),React.createElement("b",{"data-type":c,"data-id":o},l),React.createElement("span",{"data-type":c,"data-id":o},d))}return React.createElement("li",{className:"",key:a},React.createElement("a",{href:"#","data-type":c,"data-id":o,onClick:e.checkNodeInfo,className:t.type},n))});t=React.createElement("ul",{className:"results-list"},a)}else""==this.state.keywords&&showAllNodes();return React.createElement("div",{className:"sidebar-block search-block"},React.createElement("form",{id:"search-module"},React.createElement("div",{className:"input-wrapper"},React.createElement("input",{type:"text",id:"search-keywords",name:"keyword",className:"search-input",autoComplete:"off",placeholder:this.state.placeholder,onChange:this.searchKeyword,onFocus:this.showPreviousSearch}),t)))}});
"use strict";var SortTable=React.createClass({displayName:"SortTable",getInitialState:function(){var t={currentPage:1,data:[],titles:[]};return t.per_page=30,t.current_page=1,addCallback("onTableResponse",this.onResponse),addCallback("updateTableView",this.onUpdateData),addCallback("paginateTable",this.paginateTable),addCallback("search",this.onSearch),t.scope=this.props.scope,"undefined"!=typeof this.props.data?(t=this.analyzeData(this.props.data),t.total_pages=Math.ceil(t.data.length/t.per_page),t.from=(t.current_page-1)*t.per_page,t.to=t.current_page*t.per_page>t.data.length?t.data.length:t.current_page*t.per_page):this.onUpdateData({type:"company",filtersParam:[]}),t},paginateTable:function(t){var e=0;"undefined"!=typeof t.page&&(e=t.page),"undefined"!=typeof t.delta&&this.state.current_page+t.delta<this.state.total_pages&&this.state.current_page+t.delta>=0&&(e=this.state.current_page+t.delta),0!=e&&(nmTrackEvent("Explore","List View Page",e),this.setState({current_page:e}))},onSearch:function(t){for(var e=[],a=this.state.data.length;a--;)this.state.data[a].nameLowerCase.indexOf(t)!=-1&&e.length<100&&e.push(this.state.data[a]);return e},analyzeData:function(t){var e=[];e=[];var a=["company","investor"];for(var s in a){var r=a[s];for(var n in t.graph.nodes[r]){var i=t.graph.nodes[r][n];e.push({name:i.n,funding_total:"undefined"==typeof i.f?0:i.f,id:i.i,type:r,nameLowerCase:i.n.toLowerCase(),index:e.length+1})}}var l=window.innerWidth<768?"#":"Number";return nmTrackEvent("Explore","List View Page",1),{titles:[{key:"index",title:l,sort:"both"},{key:"name",title:"Name",sort:"both"},{key:"funding_total",title:"Number of investments",sort:"both"}],data:e,current_page:1,total_pages:Math.ceil(e.length/this.state.per_page)}},onUpdateData:function(t){if(jQuery(".nodata-status").removeAttr("style"),"undefined"!=typeof t.type&&"undefined"!=typeof t.filtersParam){t.filtersParam.type=t.type,t.filtersParam.page="undefined"==typeof t.currentPage?1:t.currentPage,t.filtersParam.reviewed_only="undefined"!=typeof t.reviewedOnly&&t.reviewedOnly,scope.latestCallParams=t.filtersParam,scope.latestCallType=t.type;var e=ajaxCall("get_data",t.filtersParam);jQuery.ajax({url:e}).done(function(t){scopeDispatchEvent("onTableResponse",JSON.parse(t))})}},onResponse:function(t){scopeDispatchEvent("updateResults",t.info),scopeDispatchEvent("updatePagination",t.pagination);var e=this.analyzeData(t);this.setState(e),0==t.pagination.total&&(jQuery(".nodata-status").show(),nmTrackEvent("Explore","No Data Results",JSON.stringify({params:scope.latestCallParams,type:scope.latestCallType}))),jQuery(".preloader-status").hide()},handleClickNode:function(t){var e=t.target.getAttribute("data-type"),a=t.target.getAttribute("data-id");showNodeDescription(e,a),hideTableView(),t.preventDefault()},sortColumn:function(t){var e=t.target.getAttribute("data-field"),a="both";for(var s in this.state.titles)this.state.titles[s].key==e?("asc"==this.state.titles[s].sort?this.state.titles[s].sort="desc":this.state.titles[s].sort="asc",a=this.state.titles[s].sort):this.state.titles[s].sort="both";this.state.data.sort(function(t,s){var r=t[e],n=s[e];return"string"==typeof r&&(r=r.toLowerCase()),"string"==typeof n&&(n=n.toLowerCase()),"desc"==a?r>n?-1:r<n?1:0:r<n?-1:r>n?1:0}),this.setState({data:this.state.data,current_page:1})},render:function(){for(var t=this,e=this.state.titles.map(function(e){var a="th-inner sortable "+e.sort;return React.createElement("th",{key:e.key,"data-field":e.key,tabIndex:"0"},React.createElement("div",{className:a,"data-field":e.key,onClick:t.sortColumn},e.title),React.createElement("div",{className:"fht-cell"}))}),a=[],s=(this.state.current_page-1)*this.state.per_page,r=this.state.current_page*this.state.per_page>this.state.data.length?this.state.data.length:this.state.current_page*this.state.per_page,n=s;n<r;n++)a.push(this.state.data[n]);var i=a.map(function(e,a){return React.createElement("tr",{"data-index":a,key:a},React.createElement("td",null,e.index),React.createElement("td",null,React.createElement("a",{href:"#",onClick:t.handleClickNode,"data-id":e.id,"data-type":e.type,className:e.type},e.name)),React.createElement("td",null,thousandNotation(e.funding_total)))});return scopeDispatchEvent("updateTablePagination",{current_page:this.state.current_page,from:s+1,to:r,total:this.state.data.length,per_page:this.state.per_page}),(isMobile.any()||jQuery(window).width()<768)&&(0==this.state.data.length?jQuery(".table-view").attr("style","display: none !important;"):jQuery(".table-view").removeAttr("style")),React.createElement("div",{className:"bootstrap-table"},React.createElement("div",{className:"fixed-table-container"},React.createElement("div",{className:"fixed-table-body"},React.createElement("table",{className:"table table-hover"},React.createElement("thead",{className:"thead-inverse"},React.createElement("tr",null,e)),React.createElement("tbody",null,i)))))}});
"use strict";var TablePagination=React.createClass({displayName:"TablePagination",getInitialState:function(){addCallback("updateTablePagination",this.onUpdateData);var t={};return"undefined"!=typeof this.props.pagination&&(this.props.pagination.total_pages=Math.ceil(this.props.pagination.total/this.props.pagination.per_page),t=this.props.pagination),t},onUpdateData:function(t){"undefined"!=typeof t.total&&(t.total_pages=Math.ceil(t.total/t.per_page),this.setState(t))},updatePagination:function(t){scopeDispatchEvent("paginateTable",{delta:1}),t.preventDefault()},specificPage:function(t){scopeDispatchEvent("paginateTable",{page:t})},firstPage:function(t){this.specificPage(1),t.preventDefault()},prevPage:function(t){scopeDispatchEvent("paginateTable",{delta:-1}),t.preventDefault()},nextPage:function(t){scopeDispatchEvent("paginateTable",{delta:1}),t.preventDefault()},lastPage:function(t){this.specificPage(this.state.total_pages),t.preventDefault()},jumpToPage:function(t){this.specificPage(Number(t.target.getAttribute("data-page"))),t.preventDefault()},render:function(){var t=this;if("undefined"!=typeof this.state.total){for(var e=thousandNotation(this.state.total),a=2,n=[],i=[],s=this.state.total_pages-this.state.current_page,r=s>a?a:s,c=this.state.current_page-1;c>this.state.current_page-2*a;c--)(i.length<a||r+i.length<2*a)&&c>0&&(i=[c].concat(i));for(var p=[],c=this.state.current_page+1;c<=this.state.current_page+2*a;c++)(p.length<a||p.length+i.length<2*a)&&c<=this.state.total_pages&&p.push(c);n=i.concat([this.state.current_page]),n=n.concat(p);var o=n.map(function(e){return e==t.state.current_page?React.createElement("i",{key:e},thousandNotation(e)):React.createElement("a",{key:e,href:"#","data-page":e,onClick:t.jumpToPage},thousandNotation(e))}),l="",g="",h="",u="";return this.state.current_page!=this.state.total_pages&&(l=React.createElement("a",{href:"#",onClick:this.nextPage},React.createElement("i",{className:"fa fa-caret-right","aria-hidden":"true"})),g=React.createElement("a",{href:"#",onClick:this.lastPage},React.createElement("i",{className:"fa fa-forward","aria-hidden":"true"}))),1!=this.state.current_page&&(h=React.createElement("a",{href:"#",onClick:this.prevPage},React.createElement("i",{className:"fa fa-caret-left","aria-hidden":"true"})),u=React.createElement("a",{href:"#",onClick:this.firstPage},React.createElement("i",{className:"fa fa-backward","aria-hidden":"true"}))),React.createElement("div",{className:"results-wrapper"},React.createElement("span",null,"Displaying results ",thousandNotation(this.state.from),"-",thousandNotation(this.state.to)," of ",e)," | ",React.createElement("span",{className:"pagination"},u,h,o,l,g))}return React.createElement("div",null)}});
"use strict";var Tag=React.createClass({displayName:"Tag",render:function(){return React.createElement("div",{className:"tag-item"},this.props.title,React.createElement("a",{href:"#",className:"remove-item",onClick:this.props.handleClick},React.createElement("img",{src:scope.image_dir+"close-icon.svg","data-value":this.props.title,"data-name":this.props.filter_name})))}});
"use strict";var TagsBlock=React.createClass({displayName:"TagsBlock",render:function(){var e=this,t={},l=this.props.filters.map(function(l){return"undefined"==typeof t[l.title]&&(t[l.title]=0),t[l.title]++,1==t[l.title]&&l.selected&&!l.just_title?React.createElement(Tag,{title:l.title,filter_name:e.props.filter_name,key:l.title,handleClick:e.props.handleUnselection}):""});return React.createElement("div",{className:"tags-content"},l)}});
"use strict";function scopeDispatchEvent(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("undefined"!=typeof scope.callbacks[e])for(var r in scope.callbacks[e]){var o=scope.callbacks[e][r](a);if(t)return o}}function addCallback(e,a){"undefined"==typeof scope.callbacks[e]&&(scope.callbacks[e]=[]),scope.callbacks[e].push(a)}function showNodeDescription(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(nmTrackEvent("Explore","Show right-hand detail view"),scopeDispatchEvent("checkNodeInfo",{type:e,id:a}),"undefined"!=typeof s&&null!=s)for(var o=s.graph.nodes(),n=o.length;n--;){var i=o[n];if(i.id==e+"_"+a){s.zoomToNode(i,.05,s.camera,r),n=0;break}}t||window.history.pushState(e+"/"+a,"",ajax_object.root_url+"/explore/"+e+"/"+a)}function checkSlugNode(){}function closeNodeDetails(){jQuery(".node-details").hasClass("collapsed")||jQuery(".node-details").animate({right:-500,time:500},function(){jQuery(".node-details").removeAttr("style").addClass("collapsed")})}function hideTableView(){jQuery(".table-view").fadeOut(),jQuery(".graph-area .graph-header .header-controls").fadeIn(),nmTrackEvent("Explore","Map View")}function showGraphZoom(e){null!=s&&(s.camera.goTo({x:s.camera.x,y:s.camera.y,ratio:e}),s.refresh())}function showNodes(e){if(null!=s){var a=[];s.graph.edges().forEach(function(t){for(var r in e)t.source!=e[r]&&t.target!=e[r]||a.push(e[r])});var t=e.join("___");s.graph.nodes().forEach(function(e){e.hidden=t.indexOf(e.id)==-1}),s.refresh(),showGraphZoom(2)}}function showAllNodes(){null!=s&&(s.graph.nodes().forEach(function(e){e.hidden=!1}),s.refresh())}function getSlug(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}function thousandNotation(e){return Number(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ajaxCall(e,a){var t=["per_page=7000","action="+e];for(var r in a)t.push(r+"="+a[r]);return ajax_object.ajax_url+"?"+t.join("&")}function abbrNumberFormat(e){var e=Number(e);return e>=1e12?(e/1e12).toFixed(1).replace(/\.0$/,"")+"T":e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}function getFormattedDate(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",t=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],r=["January","February","March","April","May","June","July","August","September","October","November","December"],o=e.split("-");return"short"==a?0==Number(o[2])&&0==Number(o[1])&&0!=Number(o[0])?o[0]:0!=Number(o[1])?t[Number(o[1])-1]+", "+o[0]:"-":0==Number(o[0])?"Undisclosed":0==Number(o[2])&&0==Number(o[1])?o[0]:0==Number(o[2])?r[Number(o[1])-1]+", "+o[0]:r[Number(o[1])-1]+" "+o[2]+", "+o[0]}function createNodes(e,a,t,r){if(!isMobile.any()){a.type=e,a.page=r,a.reviewed_only=t;var o=ajaxCall("get_graph",a);jQuery(".preloader-status").show(),renderNodesWithSigma(o)}}function renderNodesWithSigma(e){null!=s&&(clearTimeout(sTimeout),setTimeout(function(){s.graph.clear(),s.graph.kill(),jQuery("#mynetwork").html("")},1)),jQuery.ajax({url:e,dataType:"json"}).done(function(e){s=new sigma({container:"mynetwork",settings:{defaultLabelSize:14,labelSizeRatio:1,labelThreshold:6,webglOversamplingRatio:2,borderSize:1,minArrowSize:0,singleHover:!0,scalingMode:"outside",zoomMax:4,zoomMin:.02,minEdgeSize:.3,maxEdgeSize:.7,edgeHoverSizeRatio:1,edgeHoverExtremities:!1,minNodeSize:1,maxNodeSize:8,nodesPowRatio:.5,edgesPowRatio:.05,animationsTime:200}}),sigmaAddNodesToGraph("company",s,e.graph.nodes.company,e.counts.max_edges),sigmaAddNodesToGraph("investor",s,e.graph.nodes.investor,e.counts.max_edges),scope.edges={};for(var a in e.graph.edges){var t=e.graph.edges[a],r=t.s+"-"+t.i+"-"+t.t;"undefined"==typeof scope.edges[r]&&(s.graph.addEdge({id:r,source:"investor_"+t.s,target:"company_"+t.t,color:"#bbbbbb"}),scope.edges[r]=1)}s.bind("clickNode",function(e){var a=e.data.node.id;if("undefined"!=typeof a){var t=a.split("_")[1],r=a.split("_")[0];showNodeDescription(r,t)}}),s.startForceAtlas2({linLogMode:!1,adjustSizes:!1,barnesHutTheta:.5,outboundAttractionDistribution:!1,iterationsPerRender:1,barnesHutOptimize:e.graph.edges.length>150,slowDown:e.graph.edges.length>1e3?10:e.graph.edges.length>200?20:30,strongGravityMode:!1,scalingRatio:e.graph.edges.length<200?2:10,startingIterations:25,worker:!0,autoStop:!0,background:!0,gravity:e.graph.edges.length<200?2:6}),sTimeout=setTimeout(function(){s.stopForceAtlas2(),"undefined"!=typeof node_type&&"undefined"!=typeof node_id&&(window.history.pushState(node_type+"/"+node_id,""),showNodeDescription(node_type,node_id,!0,!1))},2e3+2e3*((e.graph.nodes.company.length+e.graph.nodes.investor.length)/7e3)+2e3*e.graph.edges.length/2e3)}).fail(function(){alert("An unkown error ocurred. Please try again later.")}).always(function(){s.cameras[0].goTo({ratio:1.8}),setTimeout(function(){jQuery(".preloader-status").hide()},100)})}function sigmaAddNodesToGraph(e,a,t,r){var o={company:"#0e8edf",investor:"#4c4c4c"};for(var n in t){var i=t[n],s=0;r&&i.e<=r&&(s=i.e/r);var c=2*Math.random()*Math.PI,l=i.e>0?Math.random():.35+Math.random(),d={id:e+"_"+i.i,label:i.n,x:l*Math.cos(c),y:l*Math.sin(c),color:o[e],size:10+60*s};a.graph.addNode(d)}}var s=null,sTimeout=null;sigma.prototype.zoomToNode=function(e,a,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"undefined"==typeof t&&(t=this.cameras[0]),r?(scope.camera={x:t.x,y:t.y,ratio:t.ratio},jQuery(scope.camera).animate({x:e[t.readPrefix+"x"]+14,y:e[t.readPrefix+"y"]+5,ratio:a},{duration:3e3,step:function(e){t.goTo({x:scope.camera.x,y:scope.camera.y,ratio:scope.camera.ratio}),updateZoomControl(Math.floor(100*scope.camera.ratio)),s.refresh()}})):(t.goTo({x:e[t.readPrefix+"x"]+14,y:e[t.readPrefix+"y"]+5,ratio:a}),updateZoomControl(Math.floor(100*a)),this.refresh())},sigma.prototype.resetZoom=function(e){"undefined"==typeof e&&(e=this.cameras[0]),e.ratio=1,e.x=0,e.y=0,this.refresh()};var isMobile={Android:function(){return!!navigator.userAgent.match(/Android/i)},BlackBerry:function(){return!!navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},Windows:function(){return!!navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};scope.currentSet=scope.data[scope.currentType],ReactDOM.render(React.createElement("div",null,React.createElement(NodeDescription,{scope:scope}),React.createElement("div",{id:"sidebar-controls",className:"sidebar"},React.createElement(SearchModule,null),React.createElement(FilterTypes,{title:"Type",scope:scope})),React.createElement("div",{className:"graph-area"},React.createElement("div",{className:"graph-header"},React.createElement("div",{className:"list-toggle-container header-controls"},React.createElement("button",null,"View list ",React.createElement("span",{className:"icon-list-view"})),React.createElement(ResultsCaption,{scope:scope}))),React.createElement("div",{className:"table-view"},React.createElement("div",{className:"header-controls"},React.createElement("button",null,"Close list view ",React.createElement("span",{className:"icon-close-icon"})),React.createElement(ResultsCaption,{scope:scope})),React.createElement(SortTable,{scope:scope}),React.createElement("div",{className:"table-footer"},React.createElement(TablePagination,null))),React.createElement("div",{id:"mynetwork"}),React.createElement("div",{className:"preloader-status",style:{display:"block"}},React.createElement("i",{className:"fa fa-refresh fa-spin","aria-hidden":"true"}),React.createElement("span",null,"Processing data")),React.createElement("div",{className:"nodata-status"},React.createElement("img",{src:scope.image_dir+"/nodes_map_graph.svg"}),React.createElement("div",{className:"status-wrapper"},React.createElement("span",{className:"icon-alert-icon"}),React.createElement("span",null,"No data to show"))),React.createElement("div",{className:"graph-footer image-block"},React.createElement("div",{className:"zoom-control"},React.createElement("span",null,"zoom 180%"),React.createElement("div",{id:"zoom-control",style:{height:100}})),React.createElement(Pagination,null),React.createElement("div",{className:"indications-block"},React.createElement("div",{className:"indications-left"},React.createElement("ul",null,React.createElement("li",null,React.createElement("div",{className:"round-img company"}),React.createElement("span",null,"COMPANY")),React.createElement("li",null,React.createElement("div",{className:"round-img investor"}),React.createElement("span",null,"INVESTOR")),React.createElement("li",null,React.createElement("div",{className:"round-img grey"}),React.createElement("span",null,"INVESTMENT MADE")))),React.createElement("div",{className:"indications-right"},React.createElement("ul",null,React.createElement("li",{className:"round-img small"}),React.createElement("li",{className:"round-img mid"}),React.createElement("li",{className:"round-img large"})),React.createElement("span",null,"PROPORTIONAL TO THE # OF INVESTMENTS")))))),document.getElementById("explore-the-network"));
//# sourceMappingURL=explore.min.js.map
